<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Prediction Detail - Horowednesday</title>
<link href="https://fonts.googleapis.com/css2?family=Comfortaa:wght@400;700&display=swap" rel="stylesheet">
<style>
body{font-family:'Comfortaa',cursive; background:linear-gradient(135deg,#b4e0ff,#d7c9ff); padding:20px;}
.container{background:#fff; border-radius:15px; padding:20px; max-width:600px; margin:auto; box-shadow:0 10px 20px rgba(0,0,0,0.1);}
h1{color:#5d4fa2;}
p{margin:10px 0;}
</style>
</head>
<body>
<div class="container">
<h1>คำทำนาย</h1>
<p id="question"></p>
<p id="cards"></p>
<p id="answer"></p>
<button onclick="goBack()">กลับ</button>
</div>

<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>

<script>
// Firebase config
const firebaseConfig = {
  apiKey: "AIzaSyBZR8mTUtdJC8nsajBd7hxZ1o6HFGslwUY",
  authDomain: "horowednesday.firebaseapp.com",
  projectId: "horowednesday",
  storageBucket: "horowednesday.appspot.com",
  messagingSenderId: "604956033127",
  appId: "1:604956033127:web:fec565a41020ccf28814c2",
  measurementId: "G-B38JLFJPVS"
};
firebase.initializeApp(firebaseConfig);
const db = firebase.firestore();
const auth = firebase.auth();

const urlParams = new URLSearchParams(window.location.search);
const questionId = urlParams.get("questionId");
let currentUser = null;

auth.onAuthStateChanged(user=>{
  if(user){
    currentUser = user;
    loadQuestionDetail();
  } else {
    window.location.href = "index.html";
  }
});

function loadQuestionDetail(){
  db.collection("users").doc(currentUser.uid).collection("questions").doc(questionId).get().then(doc=>{
    if(doc.exists){
      const data = doc.data();
      document.getElementById("question").innerText = `คำถาม: ${data.question || "-"}`;
      document.getElementById("cards").innerText = `ไพ่: ${(data.cards || []).join(", ")}`;
      document.getElementById("answer").innerText = `คำทำนาย: ${data.answer || "ยังไม่ได้รับคำทำนาย"}`;
    }
  });
}

function goBack(){
  window.location.href = "prediction.html";
}
</script>
</body>
</html>
