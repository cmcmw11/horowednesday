<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Register - Horowednesday</title>
<link href="https://fonts.googleapis.com/css2?family=Baloo+2:wght@400;700&display=swap" rel="stylesheet">
<style>
body{font-family:'Baloo 2', cursive;background:linear-gradient(135deg,#c3bef0,#b4e0ff);display:flex;justify-content:center;align-items:center;height:100vh;margin:0;}
.container{background:#fff;padding:30px;border-radius:20px;box-shadow:0 10px 25px rgba(0,0,0,0.1);text-align:center;}
.container img{width:80px;height:80px;border-radius:50%;margin-bottom:20px;}
.container h1{color:#5d4fa2;margin-bottom:20px;}
input{width:100%;padding:10px;margin:8px 0;border-radius:8px;border:1px solid #ccc;}
button{padding:10px 20px;border:none;border-radius:12px;background:#9d8de3;color:#fff;cursor:pointer;transition:0.3s;width:100%;}
button:hover{transform:scale(1.05);}
p a{color:#5d4fa2;text-decoration:none;}
</style>
</head>
<body>
<div class="container">
  <img src="https://raw.githubusercontent.com/username/repo/main/assets/images/wednesdaylogo.png" alt="Logo">
  <h1>สมัครสมาชิก</h1>
  <input type="text" id="name" placeholder="ชื่อ">
  <input type="email" id="email" placeholder="อีเมล">
  <input type="password" id="password" placeholder="รหัสผ่าน">
  <button onclick="register()">สมัครสมาชิก</button>
  <p>มีบัญชีแล้ว? <a href="login.html">เข้าสู่ระบบ</a></p>
</div>

<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>

<script>
const firebaseConfig = {
  apiKey: "AIzaSyBZR8mTUtdJC8nsajBd7hxZ1o6HFGslwUY",
  authDomain: "horowednesday.firebaseapp.com",
  projectId: "horowednesday",
  storageBucket: "horowednesday.firebasestorage.app",
  messagingSenderId: "604956033127",
  appId: "1:604956033127:web:fec565a41020ccf28814c2",
  measurementId: "G-B38JLFJPVS"
};
firebase.initializeApp(firebaseConfig);
const auth = firebase.auth();
const db = firebase.firestore();

function register(){
  const name = document.getElementById('name').value;
  const email = document.getElementById('email').value;
  const password = document.getElementById('password').value;
  if(!name || !email || !password){ alert("กรุณากรอกข้อมูลทั้งหมด"); return; }

  auth.createUserWithEmailAndPassword(email,password)
    .then(userCredential=>{
      const uid = userCredential.user.uid;
      // สร้าง profile ใน Firestore
      db.collection('users').doc(uid).set({
        name: name,
        birth: "",
        gender: "",
        job: "",
        relationship: ""
      }).then(()=> window.location.href="prediction.html");
    })
    .catch(err=>alert("สมัครสมาชิกไม่สำเร็จ: "+err.message));
}
</script>
</body>
</html>
